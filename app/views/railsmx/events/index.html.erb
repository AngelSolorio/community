<% title t('.events') %>
<div class="content twelve">
  <%= display_notice %>

  <sidebar class="three">
    <div class="blog">
      <h4><%= t('.blog') %></h4>
      <div class="sidebar-blog">
        <%= !@current_posts.empty? ? (render partial: 'shared/post', collection: @current_posts) : t('.not_content') %>
      </div>
    </div>
  </sidebar>

  <section class="events-section nine">
    <h1>
      <%= t('.events') %>
      <%= display_create_event_link %>
    </h1>
    <p><%= t('.text_current_events') %></p>

    <div class="event-row current">
      <% cache [current_identity, @current_events] do %>
        <%= @current_events.any? ? (render partial: 'event', collection: @current_events) : t('.not_upcoming_events') %>
      <% end %>
    </div> <br>

    <div class="event-row past-title">
      <h2><%= t('.recent_events') %></h2>
      <p><%= t('.text_past_events') %></p>
    </div>

    <div class="event-row past">
      <% cache @past_events do %>
        <%= @past_events.any? ? (render partial: 'event', collection: @past_events) : t('.not_recent_events') %>
      <% end %>
    </div>
  </section>

</div>

<script>
  document.addEventListener('page:change', function(){
    new App.Utilities.Form
  });

  $(function(){
    new App.Utilities.Form
  });
</script>
