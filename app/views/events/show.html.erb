<% title @event.name %>

<%= content_for :custom_css do %>
  <%= stylesheet_link_tag 'http://api.tiles.mapbox.com/mapbox.js/v0.6.7/mapbox.css' %>
<% end %>

<%= content_for :custom_js do %>
  <%=javascript_include_tag "http://api.tiles.mapbox.com/mapbox.js/v0.6.7/mapbox.js" %>
<% end %>

<div class="container event twelve">
  <%= render partial: 'shared/sidebar', locals: { current_events: @current_events } %>

  <div class="event-data content nine">
    <div class="description-data">
      <div class="title">
        <%= @event.name %>
      </div>
      <div class="description">
        <%= @event.description %>
      </div>
    </div>

    <div class="where-data">
      <h2> <%= t('.where_when') %></h2><br>

      <div class="location-info four">
        <div class="place">
          <%= image_tag "pin.png", id: "maker", align: "left", size: "25x38" %>
          <%= @event.location %>
        </div>
        <div class="organizer">
          <%= t('.organizer', organize: truncate(@event.organizer, length: 25)) %>
        </div>
        <div class="contact">
          <%= t('.contact', contact: truncate(@event.contact, length: 25)) %>
        </div>

        <div class="datetime">
          <div class="month"><%= localize_month(@event.date).upcase %></div>
          <div class="day"><%= @event.date.strftime("%e") %></div>
          <div class="weekday"><%= localize_weekday @event.date %></div>
          <div class="time"><%= localize_time @event.date %></div>
        </div><br>
      </div>

      <div id="map"class="map five"></div>
    </div>
  </div>
</div>

<script type="text/javascript">
  <% params = "'#{@event.name}', '#{@event.address}', #{@event.latitude}, #{@event.longitude}".html_safe %>
  document.addEventListener('page:load', function(){
    new App.Utilities.Map(<%= params %>);
  });

  $(function(){
    new App.Utilities.Map(<%= params %>);
  });
</script>


